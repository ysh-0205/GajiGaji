<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Movie_main</title>



    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

</head>
<body>

<!-- Header-->
{% include 'Movie/Movie_header.html' %}

    <div class="container mt-5">
        <!-- 검색 폼과 리뷰 작성 버튼 -->
        <div class="d-flex justify-content-end align-items-center mb-3">
            <!-- 검색 폼 추가 -->
            <form action="{% url 'Movie_main' %}" method="get" class="d-flex me-3">
                <input class="form-control me-2" type="search" placeholder="영화 검색" aria-label="Search" name="q" value="{{ request.GET.q|default:'' }}">
                <!-- 검색 버튼을 돋보기 아이콘으로 변경 -->
                <button class="btn btn-outline-primary" type="submit" aria-label="Search">
                  <i class="bi bi-search"></i>
                </button>
            </form>
            <a href="{% url 'Movie_create' %}" class="btn btn-primary">리뷰 작성</a>
        </div>
    </div>
        <!-- Section-->

<section class="py-5">
    <div class="container px-4 px-lg-5 mt-5">
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
            <!-- Movie_main.html -->
            {% for post in page_obj %}
                <div class="col mb-5">
                    <div class="card h-100">
                        <!-- Product image-->

                        {% if post.uploaded_image %}
<div data-aos="zoom-out" data-aos-delay="200">
    <a href="{% url 'Movie_detail' post.id %}">
        <img class="card-img-top hover-shrink" src="{{ post.uploaded_image.url }}" style="height: 330px; object-fit: cover;" alt="{{ post.title }}" />
    </a>
</div>

                        {% else %}
                            <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="No image" />
                        {% endif %}

                        <!-- Product details-->
                        <div class="card-body p-4">
                            <div class="text-center">
                                <!-- Product name-->
                                <h5 class="fw-bolder">{{ post.title }}</h5>
                                                                                <span class="badge bg-warning text-dark badge-star">
                                                    ⭐ {{ post.avg_rating|floatformat:1 }}
                                                </span>
                                                    <div class="d-flex justify-content-center gap-2 mt-3">
                        <a class="btn btn-outline-dark btn-sm">{{ post.Categorytype }}</a>
                        <a class="btn btn-outline-dark btn-sm">{{ post.Categorygenre }}</a>
                    </div>
                                <!-- Product price (임시)-->
                                <hr >
                                {{ post.content|truncatewords:10 }}
                            </div>
                        </div>
                        <!-- Product actions-->
                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent"></div>
                    </div>
                </div>
            {% empty %}
                <p>게시물이 없습니다.</p>
            {% endfor %}
                </div>
        </div>
    </div>
</section>

        </div>
    </div>
</section>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <span class="page-link">Previous</span>
      </li>
    {% endif %}

    {% for num in page_obj.paginator.page_range %}
      {% if page_obj.number == num %}
        <li class="page-item active" aria-current="page">
          <span class="page-link">{{ num }}</span>
        </li>
      {% else %}
        <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
      {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <span class="page-link">Next</span>
      </li>
    {% endif %}
  </ul>
</nav>

        <!-- Footer-->
{% include 'Movie/Movie_footer.html' %}





<style>
.hover-shrink {
  transition: transform 0.3s ease;
}

.hover-shrink:hover {
  transform: scale(0.95);
}
</style>



<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  AOS.init();
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
</body>
</html>